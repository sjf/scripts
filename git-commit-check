#!/bin/bash
set -eu

. ~/scripts/git-utils

if git diff --cached --quiet; then
  echo "Error: No staged changes to commit"
  exit 1
fi

if [ "$CURRENT_BRANCH" = "main" ]; then
  echo "Error: Cannot commit directly to main branch"
  exit 1
fi

git commit "$@"

# git config alias.ci '!~/scripts/git-commit-check'
